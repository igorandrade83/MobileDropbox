(function(){'use strict';var _StringfromCharCode=String.fromCharCode;this.$evt=function(e){var a=this;a.$eval||(a=angular.element(event.target).scope()),a.$eval(e)}.bind(this),this.cronapi={},this.cronapi.toDate=function(e){return new Date(e)};var getDatasource=function(e){return"string"==typeof e?window[e]:e};this.cronapi.doEval=function(e){return e},this.cronapi.evalInContext=function(js){var result=eval("this.cronapi.doEval("+js+")");if(result&&result.commands)for(var func,i=0;i<result.commands.length;i++)func=eval(result.commands[i].function),func.apply(this,result.commands[i].params);return result&&result.value?result.value:void 0},this.cronapi.client=function(pack){return{attr:function(){return this},run:function(){var bk=eval("blockly."+pack);return bk.apply(this,arguments)}.bind(this)}};var serverMap={};this.cronapi.server=function(e){var a=!1;return{attr:function(){return a=!0,this},run:function(){for(var t=e,o=0;o<arguments.length;o++)t+=arguments[o]+"";if(a){if(serverMap.hasOwnProperty(t))return"$$loading"==serverMap[t]?"":serverMap[t];serverMap[t]="$$loading"}var n=e.split("."),r=n[n.length-1];n.pop();for(var c=n.join("."),p=function(e){this.safeApply(function(){a&&(serverMap[t]=e)})}.bind(this),s=function(e){this.safeApply(function(){a&&(serverMap[t]=e)})}.bind(this),l=[c+":"+r,s,p],o=0;o<arguments.length;o++)l.push(arguments[o]);this.cronapi.util.makeCallServerBlocklyAsync.apply(this,l)}.bind(this)}},this.cronapi.conversion={},this.cronapi.conversion.asciiToBinary=function(e){var a="";if(0<e.length)for(var t,o=0;o<e.length;o++){t=e.charCodeAt(o);for(var n=7;0<=n;n--)a+=1&t>>n}return a},this.cronapi.conversion.toBoolean=function(e){return this.cronapi.internal.parseBoolean(e)},this.cronapi.conversion.toBytes=function(e){return e?e.toString():""},this.cronapi.conversion.chrToAscii=function(e){return e?e.charCodeAt(0):null},this.cronapi.conversion.stringToJs=function(e){return this.cronapi.internal.stringToJs(e)},this.cronapi.conversion.stringToDate=function(value){var pattern=/^\s*(\d+)[\/\.-](\d+)[\/\.-](\d+)(\s(\d+):(\d+):(\d+))?\s*$/;if(value){if(value instanceof Date)return value;if(pattern.test(value)){var splited=pattern.exec(value),userLang=(navigator.language||navigator.userLanguage).split("-")[0];if("pt"==userLang||"en"==userLang){var functionToCall=eval("cronapi.internal."+userLang+"Date");return functionToCall(splited)}return new Date(value)}return new Date(value)}return null},this.cronapi.conversion.intToHex=function(e){return(+e).toString(16).toUpperCase()},this.cronapi.conversion.toLong=function(e){return parseInt(e)},this.cronapi.conversion.toString=function(e){if(e){var a=new String(e);return a.toString()}return""},this.cronapi.util={},this.cronapi.util.callServerBlocklyAsync=function(e,a,t,o){var n="api/cronapi/call/body/#classNameWithMethod#/".replace("#classNameWithMethod#",e),r=this.cronapi.$scope.http,c=[];$(arguments).each(function(){c.push(this)});var p="";window.uToken&&(p=window.uToken);var s={fields:a,inputs:c.slice(4)},l=this.cronapi.internal.getAddressWithHostApp(n),d=$.ajax({type:"POST",url:l,dataType:"html",data:JSON.stringify(s),headers:{"Content-Type":"application/json","X-AUTH-TOKEN":p,toJS:!0},success:t,error:o})},this.cronapi.util.getScreenFields=function(){var e={};for(var a in this.cronapi.$scope)this.cronapi.$scope[a]&&this.cronapi.$scope[a].constructor&&"DataSet"==this.cronapi.$scope[a].constructor.name&&(e[a]={},e[a].active=this.cronapi.$scope[a].active);for(var a in this.cronapi.$scope.vars)this.cronapi.$scope.vars[a]&&(e.vars||(e.vars={}),e.vars[a]=this.cronapi.$scope.vars[a]);for(var a in this.cronapi.$scope.params)this.cronapi.$scope.params[a]&&(e.params||(e.params={}),e.params[a]=this.cronapi.$scope.params[a]);return e},this.cronapi.util.makeCallServerBlocklyAsync=function(blocklyWithFunction,callbackSuccess,callbackError){var fields=this.cronapi.util.getScreenFields(),paramsApply=[];paramsApply.push(blocklyWithFunction),paramsApply.push(fields),paramsApply.push(function(data){var result=this.cronapi.evalInContext(data);"string"==typeof callbackSuccess?eval(callbackSuccess)(result):callbackSuccess&&callbackSuccess(result)}.bind(this)),paramsApply.push(function(data,status,errorThrown){var message=this.cronapi.internal.getErrorMessage(data.responseText,errorThrown);"string"==typeof callbackError?eval(callbackError)(message):callbackError?callbackError(message):this.cronapi.$scope.Notification.error(message)}.bind(this)),$(arguments).each(function(e){3<=e&&paramsApply.push(this)}),this.cronapi.util.callServerBlocklyAsync.apply(this,paramsApply)},this.cronapi.util.callServerBlocklyNoReturn=function(){this.cronapi.util.callServerBlockly.apply(this,arguments)},this.cronapi.util.throwException=function(e){throw e},this.cronapi.util.createException=function(e){return e},this.cronapi.util.callServerBlockly=function(e){for(var a="api/cronapi/call/body/#classNameWithMethod#/".replace("#classNameWithMethod#",e),t=[],o=this.cronapi.util.getScreenFields(),n={fields:o,inputs:t},r=1;r<arguments.length;r++)t.push(arguments[r]);var c="";window.uToken&&(c=window.uToken);var p,s=this.cronapi.internal.getAddressWithHostApp(a),l=$.ajax({type:"POST",url:s,dataType:"html",data:JSON.stringify(n),async:!1,headers:{"Content-Type":"application/json","X-AUTH-TOKEN":c,toJS:!0}});if(200==l.status)p=l.responseJSON?l.responseJSON:this.cronapi.evalInContext(l.responseText);else{var d=this.cronapi.internal.getErrorMessage(l.responseText,l.statusText);throw this.cronapi.$scope.Notification.error(d),d}return p},this.cronapi.util.callServerBlocklyAsynchronous=function(e,a,t){if(""!=e&&"function"==typeof a){var t=[e,a,a],o=2;for(o;o<arguments.length;o++)t.push(arguments[o]);this.cronapi.util.makeCallServerBlocklyAsync.apply(this,t)}},this.cronapi.util.executeJavascriptNoReturn=function(value){eval(value)},this.cronapi.util.downloadFile=function(e){var a=this.cronapi.internal.getAddressWithHostApp(e);this.cronapi.screen.openUrl(a,"_blank",0,0)},this.cronapi.util.executeJavascriptNoReturn=function(value){eval(value)},this.cronapi.util.executeJavascriptReturn=function(value){return eval(value)},this.cronapi.util.openReport=function(e){this.cronapi.$scope.getReport(e)},this.cronapi.util.getURLFromOthers=function(e,a,t,o,n,r,c){var p=Object.create(n);p["Content-Type"]=a,$.ajax({method:e,url:t,data:o,headers:p}).success(r.bind(this)).error(c.bind(this))},this.cronapi.util.getUserToken=function(){return JSON.parse(window.localStorage.getItem("_u")).token},this.cronapi.util.setSessionStorage=function(e,a){window.sessionStorage.setItem(e,a)},this.cronapi.util.getSessionStorage=function(e){return window.sessionStorage.getItem(e)},this.cronapi.util.setLocalStorage=function(e,a){window.localStorage.setItem(e,a)},this.cronapi.util.getLocalStorage=function(e){return window.localStorage.getItem(e)},this.cronapi.util.executeAsynchronous=function(e){setTimeout(e,0)},this.cronapi.util.scheduleExecution=function(e,a,t,o){var n=1;"seconds"==o?n=1e3:"minutes"==o?n=6e4:"hours"==o&&(n=36e5),a*=n,t*=n;var r=-1,c=setTimeout(function(){e(),r=setInterval(e,t)}.bind(this),a);this.$on("$destroy",function(){try{clearTimeout(c)}catch(a){}try{clearInterval(r)}catch(a){}})},this.cronapi.util.openReport=function(e,a,t){this.cronapi.$scope.getReport(e,a,t)},this.cronapi.screen={},this.cronapi.screen.fieldFromScreen=function(e){return e},this.cronapi.screen.changeValueOfField=function(e,a){try{this.__tempValue=a;var t=new Function("this."+e+" = this.__tempValue;");this.safeApply(t.bind(this))}catch(a){}},this.cronapi.screen.getValueOfField=function(field){try{return field&&0<field.length?-1<field.indexOf(".active.")?eval(field):eval("this."+field):""}catch(a){alert(a)}},this.cronapi.screen.createScopeVariable=function(e,a){this.cronapi.$scope.vars[e]=a},this.cronapi.screen.getScopeVariable=function(e){return this.cronapi.$scope.vars[e]},this.cronapi.screen.notify=function(e,a){(null==a||a==null)&&(a=""),this.cronapi.$scope.Notification({message:a.toString()},e)},this.cronapi.screen.datasourceFromScreen=function(e){return e},this.cronapi.screen.startInsertingMode=function(e){getDatasource(e).$apply(function(){getDatasource(e).startInserting()})},this.cronapi.screen.startEditingMode=function(e){getDatasource(e).$apply(new function(){getDatasource(e).startEditing()})},this.cronapi.screen.previusRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).previous()})},this.cronapi.screen.nextRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).next()})},this.cronapi.screen.firstRecord=function(e){getDatasource(e).$apply(new function(){var a=getDatasource(e);a.cursor=-1,a.next()})},this.cronapi.screen.lastRecord=function(e){getDatasource(e).$apply(new function(){var a=getDatasource(e);a.cursor=a.data.length-2,a.next()})},this.cronapi.screen.removeRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).removeSilent()})},this.cronapi.screen.refreshActiveRecord=function(e){getDatasource(e).refreshActive()},this.cronapi.screen.hasNextRecord=function(e){return getDatasource(e).hasNext()},this.cronapi.screen.quantityRecords=function(e){return getDatasource(e).data.length},this.cronapi.screen.post=function(e){return getDatasource(e).postSilent()},this.cronapi.screen.filter=function(e,a){getDatasource(e).filter("/"+a)},this.cronapi.screen.changeView=function(view,params){try{function decodeCharParam(value){if(value)for(var param in paramsStopEncode){var regex=eval("/"+param+"/g");value=value.replace(regex,paramsStopEncode[param])}return value}var queryString="",paramsStopEncode={};if(paramsStopEncode["%24"]="$","undefined"!=typeof params)for(var i in Object.keys(params)){var k=Object.keys(params[i])[0],v=Object.values(params[i])[0]+"";queryString&&(queryString+="&"),queryString+=decodeCharParam(encodeURIComponent(k))+"="+encodeURIComponent(v)}var oldHash=window.location.hash;window.location.hash=view+(queryString?"?"+queryString:"");var oldHashToCheck=oldHash+(-1<oldHash.indexOf("?")?"":"?"),viewToCheck=view+(-1<view.indexOf("?")?"":"?");0<=oldHashToCheck.indexOf(viewToCheck)&&window.location.reload()}catch(a){alert(a)}},this.cronapi.screen.openUrl=function(e,a,t,o){try{var n="_self",r="";a&&"true"==a.toString().toLowerCase()&&(n="_blank"),t&&(r+="width="+t+","),o&&(r+="height="+o+","),window.open(e,n,r)}catch(a){alert(a)}},this.cronapi.screen.getParam=function(e){try{for(var a,t=[],o=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<o.length;n++)a=o[n].split("="),t.push(a[0]),t[a[0]]=a[1];if(t[e]!==void 0)return decodeURIComponent(t[e])}catch(a){}return null},this.cronapi.screen.confimDialog=function(e){var a=confirm(e);return a},this.cronapi.screen.createDefaultModal=function(e,a,t,o,n,r,c){$("#modalTemplateTitle").text(e),$("#modalTemplateBody").text(a),$("#modalTemplateCancel").text(t),$("#modalTemplateSave").text(o),$("#modalTemplateClose").unbind("click"),$("#modalTemplateClose").click(c),$("#modalTemplateCancel").unbind("click"),$("#modalTemplateCancel").click(r),$("#modalTemplateSave").unbind("click"),$("#modalTemplateSave").click(n),this.cronapi.screen.showModal("modalTemplate")},this.cronapi.screen.showModal=function(a){try{$("#"+a).modal({backdrop:"static",keyboard:!1})}catch(t){$("#"+a).show()}},this.cronapi.screen.setActiveTab=function(e){this.cronapi.$scope.safeApply(function(){$("#"+e).attr("data-target")===void 0?$("[data-target=\"#"+e+"\"]").tab("show"):$("#"+e).tab("show")})},this.cronapi.screen.hideModal=function(a){try{$("#"+a).modal("hide")}catch(t){$("#"+a).hide()}},this.cronapi.screen.showIonicModal=function(e){$("#"+e).data("cronapp-modal")&&$("#"+e).data("cronapp-modal").remove(),this.cronapi.$scope.$ionicModal.fromTemplateUrl(e,{scope:this.cronapi.$scope,animation:"slide-in-up"}).then(function(a){$("#"+e).data("cronapp-modal",a),a.show()})},this.cronapi.screen.hideIonicModal=function(e){if($("#"+e).data("cronapp-modal")){var a=$("#"+e).data("cronapp-modal");a.remove(),$("#"+e).data("cronapp-modal",null)}},this.cronapi.screen.isShownIonicModal=function(e){if($("#"+e).data("cronapp-modal")){var a=$("#"+e).data("cronapp-modal");return a.isShown()}return!1},this.cronapi.screen.showLoading=function(){this.cronapi.$scope.$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})},this.cronapi.screen.hide=function(){this.cronapi.$scope.$ionicLoading.hide()},this.cronapi.screen.getHostapp=function(){return window.hostApp},this.cronapi.screen.searchIds=function(){},this.cronapi.screen.showComponent=function(e){$("#"+e).get(0).style.setProperty("display","block","important")},this.cronapi.screen.hideComponent=function(e){$("#"+e).get(0).style.setProperty("display","none","important")},this.cronapi.screen.disableComponent=function(e){$("#"+e).data("kendoComboBox")?$("#"+e).data("kendoComboBox").enable(!1):$.each($("#"+e).find("*").addBack(),function(e,a){$(a).prop("disabled",!0)})},this.cronapi.screen.enableComponent=function(e){$.each($("#"+e).find("*").addBack(),function(e,a){$(a).prop("disabled",!1)})},this.cronapi.screen.focusComponent=function(e){this.cronapi.$scope.safeApply(function(){tinyMCE&&tinyMCE.get(e)!==void 0?tinyMCE.get(e).focus():$("#"+e).find("*").addBack().focus()})},this.cronapi.screen.changeAttrValue=function(e,a,t){$("#"+e).attr(a,t)},this.cronapi.screen.changeContent=function(e,a,t){if($("#"+e).html(a),!0===t||"true"===t){var o=angular.injector(["ng"]),n=this;o.invoke(["$compile",function(a){a(document.querySelector("#"+e))(n.cronapi.$scope)}])}},this.cronapi.screen.logout=function(){this.cronapi.$scope.logout!=null&&this.cronapi.$scope.logout()},this.cronapi.screen.refreshDatasource=function(e,a){!0==a||"true"==a?this[e].search(this[e].terms,this[e].caseInsensitive):this[e].search("",this[e].caseInsensitive)},this.cronapi.screen.loadMore=function(e){getDatasource(e).$apply(function(){getDatasource(e).nextPage()})},this.cronapi.screen.hasNextPage=function(e){return getDatasource(e).hasNextPage()},this.cronapi.dateTime={},this.cronapi.dateTime.utcTimestamp=!0,this.cronapi.dateTime.formats=function(){var e=[];return e="pt_br"==this.cronapi.$translate.use()?["DD/MM/YYYY HH:mm:ss","DD/MM/YYYY","DD-MM-YYYY HH:mm:ss","DD-MM-YYYY"]:["MM/DD/YYYY HH:mm:ss","MM/DD/YYYY","MM-DD-YYYY HH:mm:ss","MM-DD-YYYY"],e.push("YYYY-MM-DDTHH:mm:ss"),e.push("HH:mm:ss"),e.push("MMMM"),e},this.cronapi.dateTime.getMomentObj=function(e){var a=moment;if(this.cronapi.dateTime.utcTimestamp&&(a=moment.utc),e instanceof moment)return e;if(e instanceof Date)return a(e);var t=this.cronapi.dateTime.formats(),o=null;for(var n in t)if(o=a(e,t[n]),o.isValid())break;return o},this.cronapi.dateTime.getSecond=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("second"):0},this.cronapi.dateTime.getMinute=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("minute"):0},this.cronapi.dateTime.getHour=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("hour"):0},this.cronapi.dateTime.getYear=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("year"):0},this.cronapi.dateTime.getMonth=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("month")+1:0},this.cronapi.dateTime.getDay=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("date"):0},this.cronapi.dateTime.getSecondsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),o=this.cronapi.dateTime.getMomentObj(a);return t.diff(o,"seconds")},this.cronapi.dateTime.getMinutesBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),o=this.cronapi.dateTime.getMomentObj(a);return t.diff(o,"minutes")},this.cronapi.dateTime.getHoursBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),o=this.cronapi.dateTime.getMomentObj(a);return t.diff(o,"hours")},this.cronapi.dateTime.getDaysBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),o=this.cronapi.dateTime.getMomentObj(a);return t.diff(o,"days")},this.cronapi.dateTime.getMonthsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),o=this.cronapi.dateTime.getMomentObj(a);return t.diff(o,"months")},this.cronapi.dateTime.getYearsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),o=this.cronapi.dateTime.getMomentObj(a);return t.diff(o,"years")},this.cronapi.dateTime.incSecond=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("seconds",a).toDate()},this.cronapi.dateTime.incMinute=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("minutes",a).toDate()},this.cronapi.dateTime.incHour=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("hours",a).toDate()},this.cronapi.dateTime.incDay=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("days",a).toDate()},this.cronapi.dateTime.incMonth=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("months",a).toDate()},this.cronapi.dateTime.incYear=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("years",a).toDate()},this.cronapi.dateTime.getNow=function(){return moment().toDate()},this.cronapi.dateTime.formatDateTime=function(e,a){return moment(e).format(a)},this.cronapi.dateTime.newDate=function(e,a,t,o,n,r){var c=new Date;return c.setYear(e),c.setMonth(a-1),c.setDate(t),c.setHours(o),c.setMinutes(n),c.setSeconds(r),this.cronapi.dateTime.getMomentObj(c.toLocaleString()).toDate()},this.cronapi.text={},this.cronapi.text.prompt=function(){return null},this.cronapi.xml={},this.cronapi.xml.newXMLEmpty=function(){return $.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><root></root>")},this.cronapi.xml.newXMLEmptyWithRoot=function(e){var a=$.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><root></root>");return a.removeChild(a.firstElementChild),a.appendChild(e),a},this.cronapi.xml.newXMLElement=function(e,a){var t=document.createElement(e);return t.textContent=a,t},this.cronapi.xml.addXMLElement=function(e,a){try{var t=a.cloneNode(!0);return e.appendChild(t),!0}catch(a){return!1}},this.cronapi.xml.XMLHasRootElement=function(e){return!!(e&&e.getRootNode())},this.cronapi.xml.XMLGetRootElement=function(e){return e instanceof XMLDocument?e.firstElementChild:e.getRootNode()},this.cronapi.xml.XMLDocumentToText=function(e){if(e instanceof XMLDocument)return $($($(e.firstElementChild).context.outerHTML).removeAttr("xmlns"))[0].outerHTML;if(1<$(e).size()){var a="";return $.each($(e).toArray(),function(e,t){a+=$($(t)[0].outerHTML).removeAttr("xmlns")[0].outerHTML}),a}return $($($(e).context.outerHTML).removeAttr("xmlns"))[0].outerHTML},this.cronapi.xml.getChildren=function(e,a){return e instanceof XMLDocument?e.firstElementChild.toArray:a?a.localName?$(e).find(a.localName).toArray():$(e).find(a).toArray():$(e).children().toArray()},this.cronapi.xml.setAttribute=function(e,a,t){return!!a&&(e instanceof XMLDocument?(e.firstChild.setAttribute(a,t),!0):!!e&&(e.setAttribute(a,t),!0))},this.cronapi.xml.getAttributeValue=function(e,a){return a?e instanceof XMLDocument?e.firstChild.getAttribute(a)?e.firstChild.getAttribute(a):"":e&&a?e.getAttribute(a):"":""},this.cronapi.xml.getParentNode=function(e){return e instanceof XMLDocument?e.firstChild:e.parentNode},this.cronapi.xml.setElementContent=function(e,a){e instanceof XMLDocument&&(e.firstChild.textContent=a),e.textContent=a},this.cronapi.xml.getElementContent=function(e){return e instanceof XMLDocument?e.firstChild.innerText:e.innerText},this.cronapi.xml.removeElement=function(e,a){e instanceof XMLDocument?a?a instanceof HTMLUnknownElement?a.remove():$.each($(e.firstElementChild.children),function(e,t){t.localName==a&&t.remove()}):$.each($(e.firstElementChild.children),function(e,a){a.remove()}):a?a instanceof HTMLUnknownElement?a.remove():$.each($(e.children),function(e,t){t.localName==a&&t.remove()}):$.each($(e.children),function(e,a){a.remove()})},this.cronapi.xml.getElementName=function(e){return e instanceof XMLDocument?e.firstChild.localName:e.localName},this.cronapi.xml.renameElement=function(e,a){var t=e.outerHTML.replace(e.localName,a);t=t.replace("/"+e.localName,"/"+a),t=$(t).removeAttr("xmlns"),e.replaceWith(t[0])},this.cronapi.logic={},this.cronapi.logic.isNull=function(e){return null===e||"undefined"==typeof e||e==null},this.cronapi.logic.isEmpty=function(e){return""===e},this.cronapi.logic.isNullOrEmpty=function(e){return this.cronapi.logic.isNull(e)||this.cronapi.logic.isEmpty(e)},this.cronapi.logic.typeOf=function(e,a){return"array"===a?Array.isArray(e):!("object"===a&&Array.isArray(e))&&typeof e==a},this.cronapi.i18n={},this.cronapi.i18n.translate=function(e,a){if(e){for(var t,o=this.cronapi.$translate.instant(e),n=0;n<a.length;n++)if(t=a[n],null!=t&&"undefined"!=typeof t){var r=new RegExp("\\{"+n+"\\}","g");o=o.replace(r,t)}return o}},this.cronapi.internal={},this.cronapi.internal.setFile=function(e,a){this.cronapi.internal.fileToBase64(a,function(a){this.cronapi.screen.changeValueOfField(e,a)}.bind(this))},this.cronapi.internal.fileToBase64=function(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){var e=t.target.result.substr(t.target.result.indexOf("base64,")+7);a(e)}},this.cronapi.internal.startCamera=function(e){if(window.cordova&&window.cordova.platformId&&"browser"!==window.cordova.platformId){var a=this;navigator.camera.getPicture(function(t){a.cronapi.screen.changeValueOfField(e,t)},function(e){console.error(e),a.cronapi.$scope.Notification.error(message)},{quality:60,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.PNG,correctOrientation:!0})}else{function a(e,a){var t=window.innerWidth,o=window.innerHeight,n=0;return n=t/e,a*=n,e*=n,e>t&&(n=t/e,a*=n,e*=n),a>o&&(n=o/a,e*=n,a*=n),{width:e,height:a}}var t="<div class=\"camera-container\" style=\"margin-left:-$marginleft$;margin-top:-$margintop$\">                                      <div class=\"btn btn-success button button-balanced\" id=\"cronapiVideoCaptureOk\" style=\"position: absolute; z-index: 999999999;\">                                          <span class=\"glyphicon glyphicon-ok icon ion-checkmark-round\"></span>                                      </div>                                      <div class=\"btn btn-danger button button-assertive button-cancel-capture\" id=\"cronapiVideoCaptureCancel\" style=\"position: absolute; margin-left: 42px; z-index: 999999999;\">                                          <span class=\"glyphicon glyphicon-remove icon ion-android-close\"></span>                                      </div>                                      <video id=\"cronapiVideoCapture\" style=\"height: $height$; width: $width$;\" autoplay=\"\"></video>                              </div>",o=null;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(n){o=n;var r=a(n.getTracks()[0].getSettings().width,n.getTracks()[0].getSettings().height),c=r.width,p=r.height;try{c=parseInt(c/2),p=parseInt(p/2)}catch(a){}t=t.split("$height$").join(r.height+"px").split("$width$").join(r.width+"px").split("$marginleft$").join(c+"px").split("$margintop$").join(p+"px");var s=$(t);s.prependTo("body");var l=document.getElementById("cronapiVideoCapture");s.find("#cronapiVideoCaptureCancel").on("click",function(){null!=o&&0<o.getTracks().length&&o.getTracks()[0].stop(),$(s).remove()}.bind(this)),s.find("#cronapiVideoCaptureOk").on("click",function(){this.cronapi.internal.captureFromCamera(e,r.width,r.height),null!=o&&0<o.getTracks().length&&o.getTracks()[0].stop(),$(s).remove()}.bind(this)),l.srcObject=n,l.onloadedmetadata=function(){l.play()}}.bind(this))}},this.cronapi.internal.downloadFileEntityMobile=function(a,t,o){var n,r,c=null;if(o)n=a.data[o][t],r=a.data[o];else try{n=a.active[t],r=a.active}catch(o){n=a[t],r=a}try{var c=JSON.parse(n)}catch(a){}if(c){var p=this.cronapi.internal.getAddressWithHostApp("/api/cronapi/filePreview/");window.open(p+c.path,"_system")}else if(-1<n.indexOf("dropboxusercontent"))window.open(n,"_system");else{var s="/api/cronapi/downloadFile",l=a.entity.split("/"),d=l[l.length-1];if(-1<d.indexOf(":")){for(var m="",g=l[3].split("."),u=0;u<g.length-1;u++)m+=g[u]+".";var e=d.split(":");d=m+e[e.length-1]}s+="/"+d,s+="/"+t;var h=r,b=a.getKeyValues(h),y=0;for(var f in b)s=0==y?s+"/"+h[f]:s+":"+h[f],y++;var p=this.cronapi.internal.getAddressWithHostApp(s);window.open(p,"_system")}},this.cronapi.internal.captureFromCamera=function(e,a,t){var o=document.createElement("canvas");o.width=a,o.height=t;var n=o.getContext("2d"),r=document.getElementById("cronapiVideoCapture");n.drawImage(r,0,0,a,t);var c=o.toDataURL().substr(22);this.cronapi.screen.changeValueOfField(e,c)},this.cronapi.internal.castBinaryStringToByteArray=function(e){for(var a=e.length,t=new Uint8Array(a),o=0;o<a;o++)t[o]=e.charCodeAt(o);return t},this.cronapi.internal.castBase64ToByteArray=function(e){var a=window.atob(e);return this.cronapi.internal.castBinaryStringToByteArray(a)},this.cronapi.internal.castByteArrayToString=function(e){return _StringfromCharCode.apply(null,new Uint16Array(e))},this.cronapi.internal.generatePreviewDescriptionByte=function(data){var json;try{json=JSON.parse(data)}catch(e){try{json=JSON.parse(window.atob(data))}catch(e){if(data&&-1<data.indexOf("dropboxusercontent")){json={};var urlSplited=data.split("/"),fullName=urlSplited[urlSplited.length-1].replace("?dl=0",""),fullNameSplited=fullName.split("."),extension="."+fullNameSplited[fullNameSplited.length-1];json.fileExtension=extension,json.name=fullName.replace(extension,""),json.contentType="file/"+extension.replace(".","")}else if(data&&data.match(/__odataFile_/g)){var file=eval(data),fullNameSplited=file.name.split("."),extension="."+fullNameSplited[fullNameSplited.length-1];json={},json.fileExtension=extension,json.name=file.name,json.contentType=file.type||"unknown"}else if(data&&this.cronapi.internal.isBase64(data)){var fileName="download",fileExtesion=this.cronapi.internal.getExtensionBase64(data),contentType=this.cronapi.internal.getContentTypeFromExtension(fileExtesion);fileName+=fileExtesion,json={},json.fileExtension=fileExtesion,json.name=fileName,json.contentType=contentType}}}if(json){25<json.name.length&&(json.name=json.name.substr(0,22)+"...");var result="<b>Nome:</b> <br/>"+json.name+"<br/>";return result+="<b>Content-Type:</b> <br/>"+json.contentType+"<br/>",result+="<b>Extens\xE3o:</b> <br/>"+json.fileExtension+"<br/>",result}},this.cronapi.internal.getContentTypeFromExtension=function(e){if(e)switch(e.toLowerCase()){case".png":return"image/png";case".jpg":return"image/jpeg";case".mp4":return"video/mp4";case".pdf":return"application/pdf";case".ico":return"image/vnd.microsoft.icon";case".rar":return"application/x-rar-compressed";case".rtf":return"application/rtf";case".txt":return"text/plain";case".zip":return"application/zip";case".srt":return"text/srt";default:return"unknown";}},this.cronapi.internal.getExtensionBase64=function(e){if(e){var a=e.substr(0,5);switch(a.toLocaleUpperCase()){case"IVBOR":return".png";case"/9J/4":return".jpg";case"AAAAF":return".mp4";case"JVBER":return".pdf";case"AAABA":return".ico";case"UMFYI":return".rar";case"E1XYD":return".rtf";case"U1PKC":return".txt";case"UESDB":return".zip";case"MQOWM":case"77U/M":return".srt";default:return"";}}return""},this.cronapi.internal.isBase64=function(e){try{return btoa(atob(e))==e}catch(e){return!1}},this.cronapi.internal.downloadFileEntity=function(datasource,field,indexData){function downloadUrl(e,a){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",a);var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}var valueContent,itemActive,tempJsonFileUploaded=null;if(indexData)valueContent=datasource.data[indexData][field],itemActive=datasource.data[indexData];else try{valueContent=datasource.active[field],itemActive=datasource.active}catch(a){valueContent=datasource[field],itemActive=datasource}try{var tempJsonFileUploaded=JSON.parse(valueContent)}catch(a){}if(tempJsonFileUploaded)window.open("/api/cronapi/filePreview/"+tempJsonFileUploaded.path);else if(-1<valueContent.indexOf("dropboxusercontent"))window.open(valueContent);else if(datasource.isOData()){var bytesOrFileInput,urlCreator=window.URL||window.webkitURL||window.mozURL||window.msURL,fileName="download";valueContent.match(/__odataFile_/g)?(bytesOrFileInput=eval(valueContent),fileName=bytesOrFileInput.name):(fileName+=this.cronapi.internal.getExtensionBase64(valueContent),valueContent=window.atob(valueContent),bytesOrFileInput=this.cronapi.internal.castBinaryStringToByteArray(valueContent));var url=urlCreator.createObjectURL(new Blob([bytesOrFileInput],{type:"application/octet-stream"}));downloadUrl(url,fileName)}else{var url="/api/cronapi/downloadFile",splited=datasource.entity.split("/"),entity=splited[splited.length-1];if(-1<entity.indexOf(":")){for(var entityRelation="",splitedDomainBase=splited[3].split("."),i=0;i<splitedDomainBase.length-1;i++)entityRelation+=splitedDomainBase[i]+".";var entityRelationSplited=entity.split(":");entity=entityRelation+entityRelationSplited[entityRelationSplited.length-1]}url+="/"+entity,url+="/"+field;var _u=JSON.parse(localStorage.getItem("_u")),object=itemActive,finalUrl=this.cronapi.internal.getAddressWithHostApp(url);this.$promise=this.cronapi.$scope.$http({method:"POST",url:finalUrl,data:object?JSON.stringify(object):null,responseType:"blob",headers:{"Content-Type":"application/json","X-AUTH-TOKEN":_u.token}}).success(function(e,a,t){t=t();var o=t["x-filename"]||"download.bin",n=window.URL||window.webkitURL||window.mozURL||window.msURL;try{var r=n.createObjectURL(e);downloadUrl(r,o)}catch(e){console.log("Error downloading file"),console.log(e)}}.bind(this)).error(function(){console.log("Error downloading file")}.bind(this))}},this.cronapi.internal.uploadFileAjax=function(e,a,t){var o=new FormData;o.append("file",a);var n=JSON.parse(localStorage.getItem("_u")),r=this.cronapi.internal.getAddressWithHostApp("/api/cronapi/uploadFile");this.$promise=this.cronapi.$scope.$http({method:"POST",url:r,data:o,headers:{"Content-Type":void 0,"X-AUTH-TOKEN":n.token},onProgress:function(e){if(e.lengthComputable){var a=0|100*(e.loaded/e.total),o=$("#"+t);if(0<o.length)if("bootstrapProgress"==o.data("type"))100>a?(o.show(),o.find(".progress-bar").css("width",a+"%")):(o.hide(),o.find(".progress-bar").css("width","0%"));else{var n=document.getElementById(t);n.value=n.innerHTML=a}}}}).success(function(a){this.cronapi.screen.changeValueOfField(e,a.jsonString)}.bind(this)).error(function(){alert("Error uploading file")}.bind(this))},this.cronapi.internal.uploadFile=function(field,file,progressId){if(file){var regexForDatasource=/(.*?).active./g,groupDatasource=regexForDatasource.exec(field);if(groupDatasource){var datasource=eval(groupDatasource[1]);if(datasource.isOData()){var regexForField=/.active.([a-zA-Z0-9]*)/g,groupField=regexForField.exec(field),fieldName=groupField[1],schemaField=datasource.getFieldSchema(fieldName);schemaField&&"Binary"==schemaField.type?(datasource.active["__odataFile_"+fieldName]=file,datasource.active[fieldName]=datasource.name+".active.__odataFile_"+fieldName):this.cronapi.internal.uploadFileAjax(field,file,progressId)}else this.cronapi.internal.uploadFileAjax(field,file,progressId)}else this.cronapi.internal.uploadFileAjax(field,file,progressId)}},this.cronapi.object={},this.cronapi.object.getProperty=function(e,a){var t=a.split(".");if(1<t.length){var o=function(e,a,t){return t||(t=0),void 0===e[a[t]]&&(e[a[t]]={}),t++,t<a.length?o(e[a[t-1]],a,t):e[a[t-1]]};return o(e,t,0)}return e[a]},this.cronapi.object.setProperty=function(e,a,t){var o=a.split(".");if(1<o.length){var n=function(e,a,t,o){o||(o=0),e[a[o]]===void 0&&(e[a[o]]={}),o++,o<a.length?n(e[a[o-1]],a,t,o):e[a[o-1]]=t};n(e,o,t,0)}else e[a]=t},this.cronapi.object.createObjectFromString=function(e){return JSON.parse(e)},this.cronapi.object.serializeObject=function(e){return JSON.stringify(e)},this.cronapi.object.deleteProperty=function(e,a){delete e[a]},this.cronapi.object.newObject=function(){var e={};if(arguments&&0<arguments.length)for(var a,t=0;t<arguments.length;t++)a=arguments[t],a.name&&(e[a.name]=a.value);return e},this.cronapi.object.getObjectField=function(e,a){var t;return e&&a&&(t=e[a]),t},this.cronapi.json={},this.cronapi.json.createObjectFromString=function(e){return this.cronapi.object.createObjectFromString(e)},this.cronapi.json.setProperty=function(e,a,t){this.cronapi.object.setProperty(e,a,t)},this.cronapi.json.deleteProperty=function(e,a){this.cronapi.object.deleteProperty(e,a)},this.cronapi.json.getProperty=function(e,a){return this.cronapi.object.getProperty(e,a)},this.cronapi.cordova={},this.cronapi.cordova.vibrate=function(e){navigator.vibrate(e)},this.cronapi.cordova.device={},this.cronapi.cordova.device.getFirebaseToken=function(e,a){window.FirebasePlugin.getToken(e,a)},this.cronapi.cordova.device.getFirebaseNotificationData=function(e,a){document.addEventListener("deviceready",function(){window.FirebasePlugin.onNotificationOpen(function(a){e(a)},function(e){a(e)})},!1)},this.cronapi.cordova.device.getDeviceInfo=function(e){return window.device[e]},this.cronapi.cordova.geolocation={},this.cronapi.cordova.geolocation.getCurrentPosition=function(e,a){navigator.geolocation.getCurrentPosition(e,a)},this.cronapi.cordova.geolocation.watchPosition=function(e,a,t,o,n){return navigator.geolocation.watchPosition(callbackSuccess,callbackError,{maximumAge:t,timeout:o,enableHighAccuracy:n})},this.cronapi.cordova.geolocation.clearWatchPosition=function(e){navigator.geolocation.clearWatch(e)},this.cronapi.cordova.camera={},this.cronapi.cordova.camera.getPicture=function(e,a,t,o,n,r){(n===void 0||null===n)&&(n=0),r=!0===r||"true"===r,navigator.camera.getPicture(e,a,{destinationType:t,sourceType:o,mediaType:n,allowEdit:r})},this.cronapi.cordova.camera.qrCodeScanner=function(e,a,t,o){cordova.plugins.barcodeScanner.scan(function(e){t(e.text)},function(e){o(e)},{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!0,saveHistory:!0,prompt:a,resultDisplayDuration:500,formats:e,orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},this.cronapi.cordova.file={},this.cronapi.cordova.file.getDirectory=function(e){var a;return"0"==e?a=cordova.file.dataDirectory:(a=cordova.file.externalApplicationStorageDirectory,!a&&(a=cordova.file.externalDataDirectory),!a&&(a=cordova.file.syncedDataDirectory)),a},this.cronapi.cordova.file.removeFile=function(e,a,t){window.resolveLocalFileSystemURL(e,function(e){e.remove(function(e){a&&a(e)}.bind(this),t)}.bind(this),t)},this.cronapi.cordova.file.readFile=function(e,a,t,o){window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){var t=new FileReader;switch(t.onloadend=function(){a(this.result)},o){case"ARRAYBUFFER":{t.readAsArrayBuffer(e);break}case"TEXT":{t.readAsText(e);break}case"BINARYSTRING":{t.readAsBinaryString(e);break}case"DATAURL":{t.readAsDataURL(e);break}default:t.readAsText(e);}}.bind(this),t)}.bind(this),t)},this.cronapi.cordova.file.createFile=function(e,a,t,o,n){e||getDirectory(0);window.resolveLocalFileSystemURL(e,function(r){console.log(e),r.getFile(a,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=function(){console.log("Write of file \""+a+"\"\" completed.")},e.onerror=function(a){console.log("Write failed: "+a.toString())};var n=new Blob([t],{type:"text/plain"});e.write(n),o&&setTimeout(function(){o()}.bind(this),500)}.bind(this),n)}.bind(this),n)}.bind(this),n)},this.cronapi.cordova.file.createDirectory=function(e,a,t,o){window.resolveLocalFileSystemURL(e,function(){parentEntry.getDirectory(a,{create:!0},function(e){t&&t(e)}.bind(this),o)}.bind(this),o)},this.cronapi.cordova.storage={},this.cronapi.cordova.storage.setStorageItem=function(e,a){var t=window.localStorage;t?t.setItem(e,a):console.error("Local Storage not Found!")},this.cronapi.cordova.storage.getStorageItem=function(e){var a=window.localStorage;return a?a.getItem(e):void console.error("Local Storage not Found!")},this.cronapi.cordova.storage.removeStorageItem=function(e){var a=window.localStorage;a?a.removeItem(e):console.error("Local Storage not Found!")},this.cronapi.cordova.connection={},this.cronapi.cordova.connection.getConnection=function(){return navigator.connection.type},this.cronapi.cordova.connection.verifyConnection=function(e){return navigator.connection.type==e},this.cronapi.cordova.database={},this.cronapi.cordova.database.nameDefault="cronappDB",this.cronapi.cordova.database.openDatabase=function(e){return e?window.openDatabase(e,"1.0",e,1e6):window.openDatabase(this.cronapi.cordova.database.nameDefault,"1.0",this.cronapi.cordova.database.nameDefault,1e6)},this.cronapi.cordova.database.executeSql=function(e,a,t,o,n){var r=this.cronapi.cordova.database.openDatabase(e);r.transaction(function(e){e.executeSql(a,t,function(e,a){o.call(this,Object.values(a.rows))}.bind(this))}.bind(this),function(a){console.log(a),n(a)}.bind(this))},this.cronapi.internal.ptDate=function(e){var a,t=e[1],o=e[2],n=e[3],r=e[5],c=e[6],p=e[7];return a=r?new Date(n,o-1,t,r,c,p):new Date(n,o-1,t,0,0,0),a},this.cronapi.internal.enDate=function(e){var a,t=e[1],o=e[2],n=e[3],r=e[5],c=e[6],p=e[7];return a=r?new Date(n,t-1,o,r,c,p):new Date(n,t-1,o,0,0,0),a},this.cronapi.internal.parseBoolean=function(e){return!!e&&("boolean"==typeof e?e:(e=e.toString().toLowerCase().trim(),"1"==e||"true"==e))},this.cronapi.internal.removeAccents=function(e){var a="";for(i=0;i<e.length;i++)a+=0<="\xE1\xE0\xE3\xE2\xE4\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF3\xF2\xF5\xF4\xF6\xFA\xF9\xFB\xFC\xE7\xC1\xC0\xC3\xC2\xC4\xC9\xC8\xCA\xCB\xCD\xCC\xCE\xCF\xD3\xD2\xD5\xD6\xD4\xDA\xD9\xDB\xDC\xC7".search(e.substr(i,1))?"aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC".substr("\xE1\xE0\xE3\xE2\xE4\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF3\xF2\xF5\xF4\xF6\xFA\xF9\xFB\xFC\xE7\xC1\xC0\xC3\xC2\xC4\xC9\xC8\xCA\xCB\xCD\xCC\xCE\xCF\xD3\xD2\xD5\xD6\xD4\xDA\xD9\xDB\xDC\xC7".search(e.substr(i,1)),1):e.substr(i,1);return a},this.cronapi.internal.arrayRemove=function(e,a){var t=this.cronapi.internal.arrayIndexOf(e,a);-1!=t&&e.splice(t,1)},this.cronapi.internal.arrayIndexOf=function(e,a){var t=-1;return $(e).each(function(e){a==this&&(t=e)}),t},this.cronapi.internal.replaceAll=function(e,a,t){return e.toString().split(a).join(t)},this.cronapi.internal.getWindowHeight=function(){$(window).height()},this.cronapi.internal.getWindowWidth=function(){$(window).width()},this.cronapi.internal.getAddressWithHostApp=function(e){var a=window.hostApp||"";if(a=a.endsWith("/")?a.substr(0,a.length-1):a,e){var t=e.startsWith("/")?e.substr(1):e;a=""===a?t:a+"/"+t}return a},this.cronapi.internal.Url={encode:function(e){return e?escape(this.cronapi.internal.Url._utf8_encode(e)):""},decode:function(e){return e?this.cronapi.internal.Url._utf8_decode(unescape(e)):""},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var a,t="",o=0;o<e.length;o++)a=e.charCodeAt(o),128>a?t+=_StringfromCharCode(a):127<a&&2048>a?(t+=_StringfromCharCode(192|a>>6),t+=_StringfromCharCode(128|63&a)):(t+=_StringfromCharCode(224|a>>12),t+=_StringfromCharCode(128|63&a>>6),t+=_StringfromCharCode(128|63&a));return t},_utf8_decode:function(e){for(var a="",t=0,o=c1=c2=0;t<e.length;)o=e.charCodeAt(t),128>o?(a+=_StringfromCharCode(o),t++):191<o&&224>o?(c2=e.charCodeAt(t+1),a+=_StringfromCharCode((31&o)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=_StringfromCharCode((15&o)<<12|(63&c2)<<6|63&c3),t+=3);return a}},this.cronapi.internal.stringToJs=function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},this.cronapi.internal.getErrorMessage=function(e,a){try{var t=JSON.parse(e);if(t&&t.error)return t.error}catch(a){}return a},this.cronapi.util.upload=function(e,a,t,o,n){this.UploadService.upload({description:a,id:e,filter:t,maxSize:o,multiple:n,scope:this})},this.cronapi.chart={},this.cronapi.chart.createChart=function(e,a,t,o){function n(){return l<s.length?l++:l=0,l}function r(){""==m.data.datasets[0].label&&(null==m.options.legend?(m.options.legend={},m.options.legend.display=!1):m.options.legend.display=!1)}function c(e){for(var a=[],t=4;t<e.length;t++)e[t].label?e[t].options?(e[t].data?a.push(cronapi.chart.createDataset(e[t].label,e[t].data,e[t].options)):a.push(cronapi.chart.createDataset(e[t].label,e[t],null)),a.push(cronapi.chart.createDataset(e[t].label,e[t].data,e[t].options))):a.push(cronapi.chart.createDataset(e[t].label,e[t].data,null)):e[t].options?(e[t].data?a.push(cronapi.chart.createDataset(null,e[t].data,e[t].options)):a.push(cronapi.chart.createDataset(null,e[t],e[t].options)),a.push(cronapi.chart.createDataset(null,e[t].data,e[t].options))):e[t].data?a.push(cronapi.chart.createDataset(null,e[t].data,null)):a.push(cronapi.chart.createDataset(null,e[t],null));return a}function p(){null==m.options?(m.options={},m.options.scales={},m.options.scales.yAxes=[{ticks:{beginAtZero:!0}}]):null==m.options.scales&&(m.options.scales={},m.options.scales.yAxes=[{ticks:{beginAtZero:!0}}])}var s=["#FF5C00","#0E53A7","#48DD00","#FFD500","#7309AA","#CD0074","#00AF64","#BF8230","#F16D95","#A65000","#A65000","#AF66D5"],l=0,d=document.getElementById(e);d._chart&&d._chart.destroy(),d.getContext("2d");var m={};if(m.type=a,m.data=[],m.options={},m.data.labels=Array.isArray(t)?t:JSON.parse(t),m.data.datasets=[],Array.isArray(o))m.options=o;else if(""!=o&&null!=o)try{m.options=JSON.parse(o)}catch(a){m.options={},console.log(a)}else m.options={};switch(a){case"line":{m.data.datasets=c(arguments),$.each(m.data.datasets,function(e,a){a.fill=!1,a.backgroundColor=s[n()],a.borderColor=a.backgroundColor,p(),r()});break}case"bar":{m.data.datasets=c(arguments),$.each(m.data.datasets,function(e,a){a.backgroundColor=s[n()],a.borderColor=a.backgroundColor}),p(),r();break}case"doughnut":{var g=c(arguments);$.each(g,function(e){var a={};a=g[e],a.backgroundColor=[],a.borderColor=[],$.each(a.data,function(){a.backgroundColor.push(s[n()])}),a.borderColor=a.backgroundColor,m.data.datasets.push(a),l=0});break}case"pie":{var g=c(arguments);$.each(g,function(e){var a={};a=g[e],a.backgroundColor=[],a.borderColor=[],$.each(a.data,function(){a.backgroundColor.push(s[n()])}),a.borderColor=a.backgroundColor,m.data.datasets.push(a),l=0});break}case"polarArea":{var g=c(arguments);$.each(g,function(e){var a={};a=g[e],a.backgroundColor=[],a.borderColor=[],$.each(a.data,function(){a.backgroundColor.push(s[n()])}),a.borderColor=a.backgroundColor,m.data.datasets.push(a),l=0});break}default:}var u=new Chart(d,m);d._chart=u},this.cronapi.chart.createDataset=function(e,a,t){var o={};return o.label=e?e:"",o.data=Array.isArray(a)?a:a?JSON.parse(a):[],o.options=Array.isArray(t)?t:JSON.parse(t),o},this.cronapi.social={},this.cronapi.social.gup=function(e,a){a||(a=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",o=new RegExp(t),n=o.exec(a);return null==n?null:n[1]},this.cronapi.social.login=function(e,a,t){var o;this.cronapi.screen.showLoading(),this.cronapi.logic.isNullOrEmpty(this.cronapi.screen.getHostapp())?(this.cronapi.screen.hide(),this.cronapi.screen.notify("error","HostApp is Required")):this.cronapi.util.getURLFromOthers("POST","application/x-www-form-urlencoded",this.cronapi.screen.getHostapp()+""+"auth",this.cronapi.object.createObjectFromString(["{ \"username\": \"",e,"\" , \"password\": \"",a,"\" } "].join("")),this.cronapi.object.createObjectFromString(["{ \"X-AUTH-TOKEN\": \"",t,"\" } "].join("")),function(e){o=e,this.cronapi.screen.hide(),this.cronapi.util.setLocalStorage("_u",this.cronapi.object.serializeObject(o)),this.cronapi.screen.changeView("#/app/logged/home",[])}.bind(this),function(e){o=e,"403"==this.cronapi.object.getProperty(o,"status")||"401"==this.cronapi.object.getProperty(o,"status")?this.cronapi.screen.notify("error",this.cronapi.i18n.translate("LoginViewInvalidpassword",[])):this.cronapi.screen.notify("error",this.cronapi.object.getProperty(o,"responseJSON.message")),this.cronapi.screen.hide()}.bind(this))},this.cronapi.social.sociaLogin=function(e){var a=this,t=window.hostApp+"signin/"+e+"/";if(cordova.InAppBrowser){var o=cordova.InAppBrowser.open(t,"_blank","location=no");o.addEventListener("loadstart",function(e){-1<e.url.indexOf("_ctk")&&(o.close(),a.cronapi.social.login.bind(a)("#OAUTH#","#OAUTH#",a.cronapi.social.gup("_ctk",e.url)))})}else;},this.cronapi.screen.getSelectedRowsGrid=function(e){var a=[],t=$("[ng-model=\""+e+"\"]").children().data("kendoGrid");if(t){var o=t.select();o.each(function(){var e=t.dataItem(this);a.push(e)})}return a}}).bind(window)();